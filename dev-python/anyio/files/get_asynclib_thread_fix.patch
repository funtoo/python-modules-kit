--- _eventloop.py.orig	2022-03-08 19:52:16.631038721 -0700
+++ _eventloop.py	2022-03-08 19:55:47.024696723 -0700
@@ -129,12 +129,18 @@
         del threadlocals.current_async_module
 
 
+import threading
+get_asynclib_lock = threading.Lock()
+
 def get_asynclib(asynclib_name: Optional[str] = None) -> Any:
+    get_asynclib_lock.acquire()
     if asynclib_name is None:
         asynclib_name = sniffio.current_async_library()
 
     modulename = 'anyio._backends._' + asynclib_name
     try:
-        return sys.modules[modulename]
+        out = sys.modules[modulename]
     except KeyError:
-        return import_module(modulename)
+        out = import_module(modulename)
+    get_asynclib_lock.release()
+    return out
